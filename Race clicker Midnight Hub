-- Key System Configuration
local service = 829  -- Replace with your actual service ID
local secret = "022a2c62-bbaf-44bf-bf4a-33d712f830e7"  -- Replace with your actual secret

-- Load Libraries
local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()

-- Create Initial Key System Window
local KeyWindow = OrionLib:MakeWindow({Name = "Race Clicker Key System", HidePremium = false, SaveConfig = true})

-- Key System Tab
local KeyTab = KeyWindow:MakeTab({
    Name = "Key System",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Key System Variables
_G.KeyInput = "string"
_G.CheckKey = function()
    -- Replace with your actual key check logic
    return _G.KeyInput == "MidnightHub" -- Replace with your actual key
end

-- Key System UI
KeyTab:AddTextbox({
    Name = "Enter Key",
    Default = "",
    TextDisappear = true,
    Callback = function(Value)
        _G.KeyInput = Value
    end    
})

KeyTab:AddButton({
    Name = "Check Key",
    Callback = function()
        if _G.CheckKey() then
            KeyWindow:Destroy()
            loadMainScript()
        else
            OrionLib:MakeNotification({
                Name = "Wrong Key!",
                Content = "Join Discord for key (Copy Discord Link Below)",
                Image = "rbxassetid://4483345998",
                Time = 5
            })
        end
    end
})

KeyTab:AddButton({
    Name = "Copy Discord Link",
    Callback = function()
        setclipboard("https://discord.gg/nD2kXufNAU")
        OrionLib:MakeNotification({
            Name = "Discord Link Copied!",
            Content = "Paste it in your browser!",
            Image = "rbxassetid://4483345998",
            Time = 5
        })
    end
})

-- Main Script Function
function loadMainScript()
    local Window = OrionLib:MakeWindow({Name = "Race Clicker", HidePremium = false, SaveConfig = true})
    
    -- Variables
    local plr = game.Players.LocalPlayer
    local char = plr.Character or plr.CharacterAdded:Wait()
    
    -- Main Tab
    local MainTab = Window:MakeTab({
        Name = "Main",
        Icon = "rbxassetid://4483345998",
        PremiumOnly = false
    })

    -- Auto Click
    MainTab:AddToggle({
        Name = "Auto Click",
        Default = false,
        Callback = function(Value)
            getgenv().AutoClick = Value
            while getgenv().AutoClick and task.wait() do
                game:GetService("ReplicatedStorage").Packages.Knit.Services.ClickService.RF.Click:InvokeServer()
            end
        end
    })

    -- Auto Rebirth
    MainTab:AddToggle({
        Name = "Auto Rebirth",
        Default = false,
        Callback = function(Value)
            getgenv().AutoRebirth = Value
            while getgenv().AutoRebirth and task.wait() do
                game:GetService("ReplicatedStorage").Packages.Knit.Services.RebirthService.RF.Rebirth:InvokeServer()
            end
        end
    })

    -- Auto Race
    MainTab:AddToggle({
        Name = "Auto Race",
        Default = false,
        Callback = function(Value)
            getgenv().AutoRace = Value
            while getgenv().AutoRace and task.wait() do
                if not char:FindFirstChild("HumanoidRootPart") then continue end
                char.HumanoidRootPart.CFrame = CFrame.new(-442300, 26, 13)
                task.wait(0.1)
                char.HumanoidRootPart.CFrame = CFrame.new(-442100, 26, 13)
            end
        end
    })

    -- Eggs Tab
    local EggsTab = Window:MakeTab({
        Name = "Eggs",
        Icon = "rbxassetid://4483345998",
        PremiumOnly = false
    })

    -- Egg Selection
    local selectedEgg = "Starter01"
    EggsTab:AddDropdown({
        Name = "Select Egg",
        Default = "Starter01",
        Options = {"Starter01", "Starter02", "Starter03", "Starter04", "Pro01", "Pro02", "Pro03"},
        Callback = function(Value)
            selectedEgg = Value
        end
    })

    -- Auto Hatch
    EggsTab:AddToggle({
        Name = "Auto Hatch",
        Default = false,
        Callback = function(Value)
            getgenv().AutoHatch = Value
            while getgenv().AutoHatch and task.wait() do
                local args = {
                    [1] = selectedEgg,
                    [2] = "1",
                    [3] = {}
                }
                game:GetService("ReplicatedStorage").Packages.Knit.Services.EggService.RF.Open:InvokeServer(unpack(args))
            end
        end
    })

    -- Auto Equip Best
    EggsTab:AddToggle({
        Name = "Auto Equip Best",
        Default = false,
        Callback = function(Value)
            getgenv().AutoEquip = Value
            while getgenv().AutoEquip and task.wait(1) do
                game:GetService("ReplicatedStorage").Packages.Knit.Services.PetsService.RF.EquipBest:InvokeServer()
            end
        end
    })

    -- Player Tab
    local PlayerTab = Window:MakeTab({
        Name = "Player",
        Icon = "rbxassetid://4483345998",
        PremiumOnly = false
    })

    -- WalkSpeed Slider
    PlayerTab:AddSlider({
        Name = "WalkSpeed",
        Min = 16,
        Max = 500,
        Default = 16,
        Color = Color3.fromRGB(255,255,255),
        Increment = 1,
        ValueName = "Speed",
        Callback = function(Value)
            char.Humanoid.WalkSpeed = Value
        end    
    })

    -- JumpPower Slider
    PlayerTab:AddSlider({
        Name = "JumpPower",
        Min = 50,
        Max = 500,
        Default = 50,
        Color = Color3.fromRGB(255,255,255),
        Increment = 1,
        ValueName = "Power",
        Callback = function(Value)
            char.Humanoid.JumpPower = Value
        end    
    })

    -- Utility Buttons
    PlayerTab:AddButton({
        Name = "Rejoin Server",
        Callback = function()
            game:GetService("TeleportService"):Teleport(game.PlaceId, plr)
        end    
    })

    PlayerTab:AddButton({
        Name = "Reset Character",
        Callback = function()
            char:BreakJoints()
        end    
    })

    -- Credits
    local CreditsTab = Window:MakeTab({
        Name = "Credits",
        Icon = "rbxassetid://4483345998",
        PremiumOnly = false
    })

    CreditsTab:AddLabel("Made by Midnight Hub")
    CreditsTab:AddLabel("Discord: discord.gg/nD2kXufNAU")
end

OrionLib:Init()
