-- Basic Key System UI
local ScreenGui = Instance.new("ScreenGui")
local Main = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local KeyInput = Instance.new("TextBox")
local SubmitKey = Instance.new("TextButton")
local GetKey = Instance.new("TextButton")
local Status = Instance.new("TextLabel")

ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

Main.Name = "Main"
Main.Parent = ScreenGui
Main.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Main.Position = UDim2.new(0.5, -150, 0.5, -100)
Main.Size = UDim2.new(0, 300, 0, 200)
Main.Active = true
Main.Draggable = true

Title.Name = "Title"
Title.Parent = Main
Title.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Title.Size = UDim2.new(1, 0, 0, 50)
Title.Font = Enum.Font.GothamBold
Title.Text = "Midnight Hub"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 22.000

KeyInput.Name = "KeyInput"
KeyInput.Parent = Main
KeyInput.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
KeyInput.Position = UDim2.new(0.5, -125, 0.3, 0)
KeyInput.Size = UDim2.new(0, 250, 0, 30)
KeyInput.Font = Enum.Font.Gotham
KeyInput.PlaceholderText = "Enter Key..."
KeyInput.Text = ""
KeyInput.TextColor3 = Color3.fromRGB(255, 255, 255)
KeyInput.TextSize = 14.000

SubmitKey.Name = "SubmitKey"
SubmitKey.Parent = Main
SubmitKey.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
SubmitKey.Position = UDim2.new(0.5, -125, 0.5, 0)
SubmitKey.Size = UDim2.new(0, 250, 0, 30)
SubmitKey.Font = Enum.Font.GothamBold
SubmitKey.Text = "Submit Key"
SubmitKey.TextColor3 = Color3.fromRGB(255, 255, 255)
SubmitKey.TextSize = 14.000

GetKey.Name = "GetKey"
GetKey.Parent = Main
GetKey.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
GetKey.Position = UDim2.new(0.5, -125, 0.7, 0)
GetKey.Size = UDim2.new(0, 250, 0, 30)
GetKey.Font = Enum.Font.Gotham
GetKey.Text = "Get Key"
GetKey.TextColor3 = Color3.fromRGB(255, 255, 255)
GetKey.TextSize = 14.000

Status.Name = "Status"
Status.Parent = Main
Status.BackgroundTransparency = 1
Status.Position = UDim2.new(0, 0, 0.85, 0)
Status.Size = UDim2.new(1, 0, 0, 30)
Status.Font = Enum.Font.Gotham
Status.Text = ""
Status.TextColor3 = Color3.fromRGB(255, 255, 255)
Status.TextSize = 14.000

-- Add corners
local function AddCorner(inst)
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = inst
end

AddCorner(Main)
AddCorner(KeyInput)
AddCorner(SubmitKey)
AddCorner(GetKey)

-- Valid Keys
local ValidKeys = {
    "MidnightHub2024",
    "PremiumUser123",
    "TestKey456"
}

-- Get Key Button
GetKey.MouseButton1Click:Connect(function()
    setclipboard("https://discord.gg/yourdiscordhere") -- Replace with your Discord link
    Status.Text = "Discord link copied!"
    Status.TextColor3 = Color3.fromRGB(0, 255, 0)
    wait(2)
    Status.Text = ""
end)

-- Submit Key Button
SubmitKey.MouseButton1Click:Connect(function()
    local keyInput = KeyInput.Text
    
    -- Check if key is valid
    local isValid = false
    for _, validKey in pairs(ValidKeys) do
        if keyInput == validKey then
            isValid = true
            break
        end
    end
    
    if isValid then
        Status.Text = "Correct Key!"
        Status.TextColor3 = Color3.fromRGB(0, 255, 0)
        wait(1)
        ScreenGui:Destroy()
        loadMainScript()
    else
        Status.Text = "Invalid Key!"
        Status.TextColor3 = Color3.fromRGB(255, 0, 0)
        wait(2)
        Status.Text = ""
    end
end)

-- Main Script Function
function loadMainScript()
    if game.PlaceId ~= 9285238704 then return end
    
    local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()
    local Window = OrionLib:MakeWindow({Name = "Race Clicker", HidePremium = false, SaveConfig = true})
    
    -- Variables
    local plr = game.Players.LocalPlayer
    local char = plr.Character or plr.CharacterAdded:Wait()
    
    -- Main Tab
    local MainTab = Window:MakeTab({
        Name = "Main",
        Icon = "rbxassetid://4483345998",
        PremiumOnly = false
    })

    -- Utility Functions
    function TPCFrame(Player_CFrame)
        if game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = Player_CFrame
        end
    end

    -- Auto Click
    MainTab:AddToggle({
        Name = "Auto Click",
        Default = false,
        Callback = function(Value)
            getgenv().AutoClick = Value
            while getgenv().AutoClick and task.wait() do
                game:GetService("ReplicatedStorage"):WaitForChild("Packages"):WaitForChild("Knit"):WaitForChild("Services"):WaitForChild("ClickService"):WaitForChild("RF"):WaitForChild("Click"):InvokeServer()
            end
        end
    })

    -- Auto Rebirth
    MainTab:AddToggle({
        Name = "Auto Rebirth",
        Default = false,
        Callback = function(Value)
            getgenv().AutoRebirth = Value
            while getgenv().AutoRebirth and task.wait() do
                game:GetService("ReplicatedStorage"):WaitForChild("Packages"):WaitForChild("Knit"):WaitForChild("Services"):WaitForChild("RebirthService"):WaitForChild("RF"):WaitForChild("Rebirth"):InvokeServer()
            end
        end
    })

    -- Auto Race
    MainTab:AddToggle({
        Name = "Auto Race",
        Default = false,
        Callback = function(Value)
            getgenv().AutoRace = Value
            while getgenv().AutoRace and task.wait() do
                TPCFrame(CFrame.new(-442300, 26, 13))
                task.wait(0.1)
                TPCFrame(CFrame.new(-442100, 26, 13))
            end
        end
    })

    -- Eggs Tab
    local EggsTab = Window:MakeTab({
        Name = "Eggs",
        Icon = "rbxassetid://4483345998",
        PremiumOnly = false
    })

    -- Egg Selection
    local selectedEgg = "Starter01"
    EggsTab:AddDropdown({
        Name = "Select Egg",
        Default = "Starter01",
        Options = {"Starter01", "Starter02", "Starter03", "Starter04", "Pro01", "Pro02", "Pro03"},
        Callback = function(Value)
            selectedEgg = Value
        end
    })

    -- Auto Hatch
    EggsTab:AddToggle({
        Name = "Auto Hatch",
        Default = false,
        Callback = function(Value)
            getgenv().AutoHatch = Value
            while getgenv().AutoHatch and task.wait() do
                local args = {
                    [1] = selectedEgg,
                    [2] = "1",
                    [3] = {}
                }
                game:GetService("ReplicatedStorage"):WaitForChild("Packages"):WaitForChild("Knit"):WaitForChild("Services"):WaitForChild("EggService"):WaitForChild("RF"):WaitForChild("Open"):InvokeServer(unpack(args))
            end
        end
    })

    -- Auto Equip Best
    EggsTab:AddToggle({
        Name = "Auto Equip Best",
        Default = false,
        Callback = function(Value)
            getgenv().AutoEquip = Value
            while getgenv().AutoEquip and task.wait(1) do
                game:GetService("ReplicatedStorage"):WaitForChild("Packages"):WaitForChild("Knit"):WaitForChild("Services"):WaitForChild("PetsService"):WaitForChild("RF"):WaitForChild("EquipBest"):InvokeServer()
            end
        end
    })

    -- Player Tab
    local PlayerTab = Window:MakeTab({
        Name = "LocalPlayer",
        Icon = "rbxassetid://4483345998",
        PremiumOnly = false
    })

    -- WalkSpeed Slider
    PlayerTab:AddSlider({
        Name = "WalkSpeed",
        Min = 16,
        Max = 500,
        Default = 16,
        Color = Color3.fromRGB(255,255,255),
        Increment = 1,
        ValueName = "Speed",
        Callback = function(Value)
            if char and char:FindFirstChild("Humanoid") then
                char.Humanoid.WalkSpeed = Value
            end
        end    
    })

    -- JumpPower Slider
    PlayerTab:AddSlider({
        Name = "JumpPower",
        Min = 50,
        Max = 500,
        Default = 50,
        Color = Color3.fromRGB(255,255,255),
        Increment = 1,
        ValueName = "Power",
        Callback = function(Value)
            if char and char:FindFirstChild("Humanoid") then
                char.Humanoid.JumpPower = Value
            end
        end    
    })

    -- FOV Slider
    PlayerTab:AddSlider({
        Name = "FOV",
        Min = 70,
        Max = 120,
        Default = 70,
        Color = Color3.fromRGB(255,255,255),
        Increment = 1,
        ValueName = "FOV",
        Callback = function(Value)
            game.Workspace.CurrentCamera.FieldOfView = Value
        end    
    })

    -- Utility Buttons
    PlayerTab:AddButton({
        Name = "Rejoin Server",
        Callback = function()
            game:GetService("TeleportService"):Teleport(game.PlaceId, plr)
        end    
    })

    PlayerTab:AddButton({
        Name = "Reset Character",
        Callback = function()
            if char then char:BreakJoints() end
        end    
    })

    PlayerTab:AddButton({
        Name = "Destroy GUI",
        Callback = function()
            OrionLib:Destroy()
        end    
    })

    -- Credits Tab
    local CreditsTab = Window:MakeTab({
        Name = "Credits",
        Icon = "rbxassetid://4483345998",
        PremiumOnly = false
    })

    CreditsTab:AddLabel("Made by Midnight Hub")
    
    OrionLib:Init()
end
